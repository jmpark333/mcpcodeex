stateDiagram-v2
    [*] --> FirstRequest
    FirstRequest --> GenerateCacheKey: 요청 파라미터로 캐시 키 생성
    GenerateCacheKey --> CheckCache: 캐시 확인

    CheckCache --> CacheMiss: 캐시에 없음
    CheckCache --> CacheHit: 캐시에 있음 (5분 내)

    CacheMiss --> ExecuteTool: 도구 실제 실행
    ExecuteTool --> StoreResult: 결과를 캐시에 저장
    StoreResult --> ReturnResult: 결과 반환
    ReturnResult --> [*]

    CacheHit --> ReturnCached: 캐시된 결과 반환
    ReturnCached --> UpdateHitCount: hit_count 증가
    UpdateHitCount --> [*]

    note right of CacheHit
        속도 향상: 10-100배
    end note
    note right of ExecuteTool
        첫 실행: O(n) 시간
    end note
    note right of ReturnCached
        캐시 히트: O(1) 시간
    end note
